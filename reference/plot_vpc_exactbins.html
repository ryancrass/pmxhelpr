<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Plot a visual predictive check (VPC) with exact time bins — plot_vpc_exactbins • pmxhelpr</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Plot a visual predictive check (VPC) with exact time bins — plot_vpc_exactbins"><meta name="description" content="plot_vpc_exactbins() is a wrapper function for vpc::vpc()
that returns a ggplot2 object."><meta property="og:description" content="plot_vpc_exactbins() is a wrapper function for vpc::vpc()
that returns a ggplot2 object."><meta property="og:image" content="https://ryancrass.github.io/pmxhelpr/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">pmxhelpr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.3</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/eda-pmxhelpr.html">Exploratory Data Analysis</a></li>
    <li><a class="dropdown-item" href="../articles/vpc-exact-bins.html">VPC Plots with Exact Bins</a></li>
    <li><a class="dropdown-item" href="../articles/vpc-obs-quant-blq-cens.html">VPC Plots with BLQ Censoring</a></li>
    <li><a class="dropdown-item" href="../articles/vpc-plot-aesthetics.html">VPC Plot Aesthetics</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ryancrass/pmxhelpr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Plot a visual predictive check (VPC) with exact time bins</h1>
      <small class="dont-index">Source: <a href="https://github.com/ryancrass/pmxhelpr/blob/main/R/plot_vpc_exactbins.R" class="external-link"><code>R/plot_vpc_exactbins.R</code></a></small>
      <div class="d-none name"><code>plot_vpc_exactbins.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>plot_vpc_exactbins()</code> is a wrapper function for <code><a href="https://rdrr.io/pkg/vpc/man/vpc.html" class="external-link">vpc::vpc()</a></code>
that returns a <code>ggplot2</code> object.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">plot_vpc_exactbins</span><span class="op">(</span></span>
<span>  <span class="va">sim</span>,</span>
<span>  pcvpc <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  time_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>TIME <span class="op">=</span> <span class="st">"TIME"</span>, NTIME <span class="op">=</span> <span class="st">"NTIME"</span><span class="op">)</span>,</span>
<span>  output_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>PRED <span class="op">=</span> <span class="st">"PRED"</span>, IPRED <span class="op">=</span> <span class="st">"IPRED"</span>, SIMDV <span class="op">=</span> <span class="st">"SIMDV"</span>, OBSDV <span class="op">=</span> <span class="st">"OBSDV"</span><span class="op">)</span>,</span>
<span>  loq <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  strat_var <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  irep_name <span class="op">=</span> <span class="st">"SIM"</span>,</span>
<span>  min_bin_count <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  show_rep <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  lower_bound <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  shown <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  theme <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  timeu <span class="op">=</span> <span class="st">"hours"</span>,</span>
<span>  n_breaks <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-sim">sim<a class="anchor" aria-label="anchor" href="#arg-sim"></a></dt>
<dd><p>Input dataset. Must contain the following variables: <code>"ID"</code>, <code>"TIME"</code></p></dd>


<dt id="arg-pcvpc">pcvpc<a class="anchor" aria-label="anchor" href="#arg-pcvpc"></a></dt>
<dd><p>logical for prediction correction. Default is <code>FALSE</code>.</p></dd>


<dt id="arg-time-vars">time_vars<a class="anchor" aria-label="anchor" href="#arg-time-vars"></a></dt>
<dd><p>Names of actual and nominal time variables. Must be named character vector.
Defaults are <code>"TIME"</code> and <code>"NTIME"</code>.</p></dd>


<dt id="arg-output-vars">output_vars<a class="anchor" aria-label="anchor" href="#arg-output-vars"></a></dt>
<dd><p>Names of model outputs from <code>model</code>. Must be named character vector.
Defaults are <code>"PRED"</code>, <code>"IPRED"</code>, and <code>"DV"</code>. Currently both <code>"IPRED"</code> and <code>"DV"</code> are required in <code>model@capture</code>.</p></dd>


<dt id="arg-loq">loq<a class="anchor" aria-label="anchor" href="#arg-loq"></a></dt>
<dd><p>Numeric value of the lower limit of quantification (LLOQ) for the assay. Passed to <code>lloq</code> argument
of <code><a href="https://rdrr.io/pkg/vpc/man/vpc.html" class="external-link">vpc::vpc()</a></code>. Specifying this argument implies that <code>OBSDV</code>is missing in <code>sim</code> where &lt; LLOQ.</p></dd>


<dt id="arg-strat-var">strat_var<a class="anchor" aria-label="anchor" href="#arg-strat-var"></a></dt>
<dd><p>Character string of stratification variable passed to <code>stratify</code> argument
of <code><a href="https://rdrr.io/pkg/vpc/man/vpc.html" class="external-link">vpc::vpc()</a></code>. Currently, only a single stratifying variable is supported.</p></dd>


<dt id="arg-irep-name">irep_name<a class="anchor" aria-label="anchor" href="#arg-irep-name"></a></dt>
<dd><p>Name of replicate variable in <code>data</code>. Must be a string. Default is <code>"SIM"</code>.</p></dd>


<dt id="arg-min-bin-count">min_bin_count<a class="anchor" aria-label="anchor" href="#arg-min-bin-count"></a></dt>
<dd><p>Minimum number of quantifiable observations in exact bin for inclusion
in binned plot layers. This argument drops small bins from summary statistic calculation
but retains these observations in the observed data points.</p></dd>


<dt id="arg-show-rep">show_rep<a class="anchor" aria-label="anchor" href="#arg-show-rep"></a></dt>
<dd><p>Display number of replicates as a plot caption. Default is <code>TRUE</code>.</p></dd>


<dt id="arg-lower-bound">lower_bound<a class="anchor" aria-label="anchor" href="#arg-lower-bound"></a></dt>
<dd><p>Lower bound of the dependent variable for prediction correction. Default is <code>0</code>.</p></dd>


<dt id="arg-shown">shown<a class="anchor" aria-label="anchor" href="#arg-shown"></a></dt>
<dd><p>Named list of logicals specifying which layers to include on the plot. Passed to <code>show</code> argument of <code><a href="https://rdrr.io/pkg/vpc/man/vpc.html" class="external-link">vpc::vpc()</a></code>.</p>
<p>Defaults are:</p><ul><li><p>Observed points: <code>obs_dv</code> = TRUE.</p></li>
<li><p>Observed quantiles: <code>obs_ci</code> = TRUE</p></li>
<li><p>Simulated inter-quantile range:<code>pi</code> = FALSE</p></li>
<li><p>Simulated inter-quantile area: <code>pi_as_area</code> = FALSE</p></li>
<li><p>Simulated Quantile CI: <code>pi_ci</code> = TRUE</p></li>
<li><p>Observed Median: <code>obs_median</code> = TRUE</p></li>
<li><p>Simulated Median: <code>sim_median</code> = FALSE</p></li>
<li><p>Simulated Median CI: <code>sim_median_ci</code> = TRUE</p></li>
</ul></dd>


<dt id="arg-theme">theme<a class="anchor" aria-label="anchor" href="#arg-theme"></a></dt>
<dd><p>Named list of aesthetic parameters for the plot.Passed to <code>vpc_theme</code> arumgent of <code><a href="https://rdrr.io/pkg/vpc/man/vpc.html" class="external-link">vpc::vpc()</a></code>.
Defaults can be obtained by running <code><a href="https://rdrr.io/pkg/vpc/man/new_vpc_theme.html" class="external-link">vpc::new_vpc_theme()</a></code> with no arguments.</p></dd>


<dt id="arg-timeu">timeu<a class="anchor" aria-label="anchor" href="#arg-timeu"></a></dt>
<dd><p>Character string specifying units for the time variable.
Passed to <code>breaks_time</code> and assigned to default x-axis label.
Options include:</p><ul><li><p>"hours" (default)</p></li>
<li><p>"days"</p></li>
<li><p>"weeks"</p></li>
<li><p>"months"</p></li>
</ul></dd>


<dt id="arg-n-breaks">n_breaks<a class="anchor" aria-label="anchor" href="#arg-n-breaks"></a></dt>
<dd><p>Number of breaks requested for x-axis. Default is 5.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Other arguments passed to <code><a href="https://rdrr.io/pkg/vpc/man/vpc.html" class="external-link">vpc::vpc()</a></code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list containing calculated VPC information (when <code>vpcdb=TRUE</code>), or a ggplot2 object (default)</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="model_mread_load.html">model_mread_load</a></span><span class="op">(</span>model <span class="op">=</span> <span class="st">"model"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Loading model from cache.</span>
<span class="r-in"><span><span class="va">simout</span> <span class="op">&lt;-</span> <span class="fu"><a href="df_mrgsim_replicate.html">df_mrgsim_replicate</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">data_sad</span>, model <span class="op">=</span> <span class="va">model</span>, replicates <span class="op">=</span> <span class="fl">100</span>,</span></span>
<span class="r-in"><span>output_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>DV <span class="op">=</span> <span class="st">"ODV"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>num_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"CMT"</span>, <span class="st">"EVID"</span>, <span class="st">"MDV"</span>, <span class="st">"NTIME"</span>, <span class="st">"LLOQ"</span>, <span class="st">"WTBL"</span>, <span class="st">"FOOD"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>char_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"USUBJID"</span>, <span class="st">"PART"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>irep_name <span class="op">=</span> <span class="st">"SIM"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">vpc_plot</span> <span class="op">&lt;-</span> <span class="fu">plot_vpc_exactbins</span><span class="op">(</span></span></span>
<span class="r-in"><span>sim <span class="op">=</span> <span class="va">simout</span>,</span></span>
<span class="r-in"><span>pcvpc <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>pi <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.05</span>, <span class="fl">0.95</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>ci <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.05</span>, <span class="fl">0.95</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>loq <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>log_y <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Joining with `by = join_by(CMT, NTIME)`</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Joining with `by = join_by(CMT, NTIME)`</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Prediction-correction cannot be used together with censored data (&lt;LLOQ or &gt;ULOQ). VPC plot will be shown for non-censored data only!</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Ryan Crass.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

    </footer></div>





  </body></html>

